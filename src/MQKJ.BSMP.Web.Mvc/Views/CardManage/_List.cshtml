
@using X.PagedList
@using X.PagedList.Mvc.Core
@using Microsoft.EntityFrameworkCore.Internal
@using MQKJ.BSMP.EnumHelper
@using MQKJ.BSMP.LoveCards
@model StaticPagedList<MQKJ.BSMP.LoveCards.Dtos.LoveCardListDto>

@{
    var snStart = ((Model.PageNumber - 1) * Model.PageSize);
}

<table class="table">
    <thead>
        <tr>
            <th>序号</th>
            <th>用户昵称</th>
            <th>微信号</th>
            <th>性别</th>
            <th>出生年月日</th>
            <th>名片编号</th>
            <th>自我介绍</th>
            <th>图片</th>
            <th>声音</th>
            <th>状态</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td>@(Model.IndexOf(item) + snStart + 1)</td>
            <td>@item.Player.NickName</td>
            <td>@item.Player.WeChatAccount</td>
            <td>@item.Player.Gender</td>
            <td>@item.Player.BirthDate</td>
            <td>@item.CardCode</td>
            <td>@item.Player.PlayerExtension.Introduce</td>
            @{
                if (item.LoveCardFiles.Count > 0)
                {
                    var file = item.LoveCardFiles.FirstOrDefault(x => x.BSMPFile.FileType == MQKJ.BSMP.BSMPFiles.FileType.Image);
                    if (file != null)
                    {
                        <td><img src="@file.BSMPFile.FilePath" /></td>

                    }
                    else
                    {
                        <td>暂无</td>

                    }
                }
                else
                {
                    <td>暂无</td>
                }
            }
            @{
                if (item.LoveCardFiles.Count > 0)
                {
                    var file = item.LoveCardFiles.FirstOrDefault(x => x.BSMPFile.FileType == MQKJ.BSMP.BSMPFiles.FileType.Audio);
                    if (file != null)
                    {
                        <td><audio src="@file.BSMPFile.FilePath"></audio></td>
                    }
                    else
                    {
                        <td>暂无</td>

                    }
                }
                else
                {
                    <td>暂无</td>
                }
            }
            @{
                if (item.State == LoveCardState.Audited)
                {
                    <td>已审核</td>
                }
                else if (item.State == LoveCardState.UnAudited)
                {
                    <td style="color:#0099FF"><span style="cursor:pointer" class="editstate" data-tag-id="@item.Id">未审核</span></td>
                }
                else
                {
                    <td style="color:#0099FF"><span style="cursor:pointer" class="editstate" data-tag-id="@item.Id">未审核</span></td>
                    <td>@*未知*@</td>
                }
            }
        </tr>
       }
    </tbody>
</table>
@Html.PagedListPager((IPagedList)Model, page => Url.Action("Index", new { page }))

